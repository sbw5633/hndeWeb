# ğŸ“˜ [ìµœì¢…] ì‚¬ë‚´ ë‚´ë¶€ ì—…ë¬´ ì‹œìŠ¤í…œ ê¸°íšì„œ

---

## 1. ì‹œìŠ¤í…œ ê°œìš”
- **ëª©ì :** íšŒì‚¬ ë‚´ë¶€ ìë£Œ ê³µìœ , ìš”ì²­/ì œì¶œ, ì—…ë¬´ ê´€ë¦¬(ì—°ì°¨, íœ´ë¬´, 4ëŒ€ë³´í—˜ ë“±), ê³µì§€ ì „ë‹¬, ê²Œì‹œíŒ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ í†µí•© í”Œë«í¼ êµ¬ì¶•
- **ê¸°ìˆ  ìŠ¤íƒ:** Flutter(Web), Firebase(Auth, Firestore), Wasabi(File Storage, ëª¨ë“  ì—…ë¡œë“œ íŒŒì¼)
- **ë””ìì¸:** ë°ì€ í‘¸ë¥¸ ê³„ì—´, ì„¸ë ¨ë˜ê³  ì§ê´€ì ì¸ ì—…ë¬´í˜• ë ˆì´ì•„ì›ƒ (ì†Œë…¸í˜¸í…”/í•œêµ­ë„ë¡œê³µì‚¬ ì°¸ê³ )

---

## 2. í•µì‹¬ ë©”ë‰´ êµ¬ì¡°
| ë©”ë‰´         | í•˜ìœ„ êµ¬ì„±/ì„¤ëª…                                   |
|--------------|-------------------------------------------------|
| ë¡œê·¸ì¸/íšŒì›ê°€ì… | ë¡œê·¸ì¸, íšŒì›ê°€ì…, ìŠ¹ì¸ ëŒ€ê¸° í™”ë©´                  |
| ëŒ€ì‹œë³´ë“œ      | ê³µì§€ ìš”ì•½, ìë£Œìš”ì²­ í˜„í™©, ì—°ì°¨ì‚¬ìš© ìš”ì•½(ì¹´ë“œí˜•)     |
| ê³µì§€ì‚¬í•­      | ê³µì§€ ëª©ë¡, ìƒì„¸, ì‘ì„± (ê¶Œí•œë³„, ì „ ì‚¬ì—…ì†Œ ê³µì§€)      |
| ê²Œì‹œíŒ        | ì¼ë°˜ ê²Œì‹œíŒ(ëŒ“ê¸€/ì‘ì„±ì), ìµëª… ê²Œì‹œíŒ(ì‘ì„±ì ìˆ¨ê¹€)  |
| ìë£Œ ìš”ì²­/ì œì¶œ | ìš”ì²­ ë“±ë¡, ì œì¶œí˜„í™©, íŒŒì¼ ì œì¶œ                    |
| íšŒì‚¬ ì •ë³´     | ì¡°ì§ë„, ë¶€ì„œë³„ êµ¬ì„±ë„ (ì •ì /ì´ë¯¸ì§€ ê¸°ë°˜)           |
| ì—…ë¬´ê¸°ëŠ¥      | ì—°ì°¨/íœ´ë¬´/4ëŒ€ë³´í—˜ ê´€ë¦¬                            |
| ê´€ë¦¬ì ê¸°ëŠ¥   | ì‚¬ìš©ì ìŠ¹ì¸/ê´€ë¦¬, ì—­í•  ë° ì†Œì† ì„¤ì •                |

---

## 3. ì‚¬ìš©ì ê¶Œí•œ ë° ì ‘ê·¼ ë²”ìœ„
| ì—­í•            | ì„¤ëª…                        | ì ‘ê·¼ ê°€ëŠ¥ ë²”ìœ„ ìš”ì•½                       |
|----------------|-----------------------------|-------------------------------------------|
| ë©”ì¸ ê´€ë¦¬ì    | ì „ì²´ ìš´ì˜ì(ê¸°ìˆ ê´€ë¦¬ì)     | ì‚¬ìš©ì ìŠ¹ì¸/ìˆ˜ì •, ëª¨ë“  ë°ì´í„° ì ‘ê·¼         |
| ë³¸ì‚¬ ê´€ë¦¬ì    | ë³¸ì‚¬ ì†Œì† ì¼ë°˜ ê´€ë¦¬ì        | ëª¨ë“  ì§€ì  ìë£Œ ì—´ëŒ, ì „ ì‚¬ì—…ì†Œ ê³µì§€ ì‘ì„±   |
| ì‚¬ì—…ì†Œ ê´€ë¦¬ì  | ì§€ì ë³„ ìë£Œ/ê³µì§€ ë‹´ë‹¹ì      | ìê¸° ì§€ì  ìš”ì²­/ì œì¶œ/ê³µì§€ ê´€ë¦¬             |
| ì¼ë°˜ ì§ì›      | ê¸°ë³¸ ì‚¬ë¬´ì§ êµ¬ì„±ì›           | ìë£Œìš”ì²­/ì œì¶œ/ì—…ë¬´ê¸°ëŠ¥ ë¶ˆê°€, ì—´ëŒë§Œ ê°€ëŠ¥   |

---

## 4. ì£¼ìš” ê¸°ëŠ¥ íë¦„
### 4.1 íšŒì›ê°€ì…/ìŠ¹ì¸
- ê°€ì… ì‹œ approved=false, ë©”ì¸ê´€ë¦¬ì ìŠ¹ì¸ í•„ìš”
- ìŠ¹ì¸ ì „ ë¡œê·¸ì¸ ì‹œ â€œìŠ¹ì¸ ëŒ€ê¸° ì¤‘â€ ë©”ì‹œì§€ ë° ê¸°ëŠ¥ ì°¨ë‹¨

### 4.2 ê³µì§€ì‚¬í•­
- ë³¸ì‚¬ ê´€ë¦¬ì ì´ìƒë§Œ ì‘ì„± ê°€ëŠ¥
- â€œì „ ì‚¬ì—…ì†Œ ê³µì§€â€ ì²´í¬ë°•ìŠ¤(ë³¸ì‚¬ ê´€ë¦¬ìë§Œ ë…¸ì¶œ)
- ëª¨ë“  ì‚¬ìš©ì ì—´ëŒ, ì†Œì†ë³„ í•„í„°ë§

### 4.3 ìë£Œ ìš”ì²­/ì œì¶œ
- ìš”ì²­: ë³¸ì‚¬/ì§€ì  ê´€ë¦¬ìë§Œ ê°€ëŠ¥
- ì œì¶œ: ì†Œì† ì§€ì  ì‚¬ìš©ìë§Œ ê°€ëŠ¥
- ë³¸ì‚¬ ê´€ë¦¬ìëŠ” ì „ì²´ ì œì¶œí˜„í™© ì—´ëŒ
- ì œì¶œ ë§ˆê° ì „/í›„, ì œì¶œ ì—¬ë¶€ ì•„ì´ì½˜ í‘œì‹œ

### 4.4 ê²Œì‹œíŒ
- ì¼ë°˜: ëŒ“ê¸€, ì‘ì„±ì í‘œì‹œ
- ìµëª…: ì‘ì„±ì ìˆ¨ê¹€(ê´€ë¦¬ìë§Œ Firestoreì—ì„œ ì‹ë³„ ê°€ëŠ¥)

### 4.5 ì—…ë¬´ê¸°ëŠ¥
- ì—°ì°¨: ë³¸ì¸ ì—°ì°¨ ë‚´ì—­ í™•ì¸
- íœ´ë¬´: ì§€ì ë³„ íœ´ë¬´ ë“±ë¡
- 4ëŒ€ë³´í—˜: ë“±ë¡/ì—´ëŒ(ë³¸ì‚¬ ì „ìš©)

---

## 5. UI/UX ë””ìì¸ ê°€ì´ë“œ
- **ì»¬ëŸ¬:** ë°ì€ í‘¸ë¥¸ ê³„ì—´ (#D0E8F2, #4DA3D2, #336699)
- **ë ˆì´ì•„ì›ƒ:** ì¢Œì¸¡ ê³ ì • ì‚¬ì´ë“œë°” + ìƒë‹¨ AppBar
- **í°íŠ¸:** Noto Sans KR, Pretendard
- **ì•„ì´ì½˜:** Lucide, Material Icons
- **ì¹´ë“œ/ë°•ìŠ¤:** ì†Œí”„íŠ¸ ê·¸ë¦¼ì, rounded-2xl
- **ë°˜ì‘í˜•:** ë°ìŠ¤í¬íƒ‘ ìš°ì„ , ëª¨ë°”ì¼ ëŒ€ì‘(ì‚¬ì´ë“œë°” ì ‘í˜)

#### ì˜ˆì‹œ UI
- AppBar: ë¡œê³  + ì‚¬ìš©ì í”„ë¡œí•„ + ë¡œê·¸ì•„ì›ƒ
- SideNav: ëŒ€ì‹œë³´ë“œ, ê³µì§€, ìë£Œ, ê²Œì‹œíŒ, ì—…ë¬´, íšŒì‚¬ì •ë³´
- Dashboard: ê³µì§€/ë¯¸ì œì¶œ/ë‚´ì—°ì°¨ ì¹´ë“œ
- Notices: ë¦¬ìŠ¤íŠ¸/ì‘ì„±/ì—´ëŒ
- Boards: íƒ­ ì „í™˜(ì¼ë°˜/ìµëª…), ëŒ“ê¸€
- DataRequests: ìš”ì²­ëª©ë¡ + ì§€ì ë³„ ì œì¶œí‘œ
- UserApproval: ìŠ¹ì¸/ê²€ìƒ‰/ìˆ˜ì •(ê´€ë¦¬ì)

---

## 6. ê¸°ìˆ /ë³´ì•ˆ ì„¤ê³„
- **ì¸ì¦:** Firebase Auth(Email/Password) + ìŠ¹ì¸ì—¬ë¶€ ì²´í¬
- **DB:** Firestore(ì‚¬ìš©ì, ê³µì§€, ìë£Œìš”ì²­, ì œì¶œ, ê²Œì‹œíŒ ë“±)
- **íŒŒì¼:** Wasabi Presigned URL(ëª¨ë“  ì—…ë¡œë“œ)
- **ë³´ì•ˆ:** Firestore ê·œì¹™(UID+ì—­í•  ê¸°ë°˜), íŒŒì¼ 50MB ì´í•˜ ê¶Œì¥
- **ê´€ë¦¬ì ë³´í˜¸:** ë©”ì¸ ê´€ë¦¬ìë§Œ ì‚¬ìš©ì ìŠ¹ì¸/ìˆ˜ì • ê°€ëŠ¥

---

## 7. Firestore êµ¬ì¡° ì˜ˆì‹œ
### Users
```json
{
  "uid": "abc123",
  "name": "í™ê¸¸ë™",
  "email": "hong@example.com",
  "affiliation": "ì„œìš¸ë³¸ì‚¬",
  "role": "hq_admin", // main_admin | hq_admin | branch_admin | employee
  "approved": true
}
```
### Notices
```json
{
  "title": "6ì›” ì „ì²´ê³µì§€",
  "targetScope": "all", // all | branch
  "createdBy": "uid",
  "createdAt": "timestamp"
}
```
### DataRequests / DataSubmissions
- ìš”ì²­ìê°€ ì‚¬ì—…ì†Œ ì„ íƒ â†’ ì œì¶œìëŠ” ì œì¶œ ë° ìƒíƒœ í‘œì‹œ
- ë³¸ì‚¬ ê´€ë¦¬ìëŠ” ì „ì²´ í…Œì´ë¸” ì—´ëŒ

---

## 8. ì¶”í›„ í™•ì¥ ê³ ë ¤
- ì „ìê²°ì¬
- ëª¨ë°”ì¼ ì•± í‘¸ì‹œ ì•Œë¦¼
- ê¸‰ì—¬ëª…ì„¸ ì—°ë™
- ì¶œì¥ë³´ê³ ì„œ ì œì¶œ
- ì‚¬ë‚´ êµìœ¡ ìˆ˜ê°•/í™•ì¸

---

**[ì¤‘ìš”/ì£¼ì˜]**
- ëª¨ë“  íŒŒì¼ ì—…ë¡œë“œëŠ” Wasabi ì‚¬ìš©(ê²Œì‹œíŒ ì²¨ë¶€ í¬í•¨)
- ìµëª… ê²Œì‹œíŒë„ Firestoreì—ëŠ” ì‘ì„±ì ì •ë³´ ì €ì¥(ê´€ë¦¬ìë§Œ ì‹ë³„)
- ì—…ë¬´ê¸°ëŠ¥(ì—°ì°¨/íœ´ë¬´/4ëŒ€ë³´í—˜)ì€ ê¶Œí•œ ì°¨ì´ ì™¸ ë³„ë„ ìš”êµ¬ì‚¬í•­ ì—†ìŒ
- ëª¨ë°”ì¼ ì•±ì€ ì¶”í›„, í˜„ì¬ëŠ” ì›¹ ì™„ì„± ìš°ì„ 

---

## 9. Firestore ì—­í• ë³„ ì ‘ê·¼ ê¶Œí•œí‘œ

| ì»¬ë ‰ì…˜         | main_admin | hq_admin | branch_admin | employee |
|----------------|:----------:|:--------:|:------------:|:--------:|
| Users          | CRUD       | R        | R            | R        |
| Notices        | CRUD       | CRUD     | CR           | R        |
| Boards         | CRUD       | CRUD     | CRUD         | CR       |
| DataRequests   | CRUD       | CRUD     | CR           | R        |
| DataSubmissions| R          | R        | R            | CR       |
| Departments    | CRUD       | R        | R            | R        |

- C: ìƒì„±(Create), R: ì¡°íšŒ(Read), U: ìˆ˜ì •(Update), D: ì‚­ì œ(Delete)
- ìŠ¹ì¸ë˜ì§€ ì•Šì€ ì‚¬ìš©ìëŠ” ëª¨ë“  ì»¬ë ‰ì…˜ ì ‘ê·¼ ë¶ˆê°€
- ìµëª… ê²Œì‹œíŒ: Firestoreì—ëŠ” ì‘ì„±ì UID ì €ì¥, UIì—ë§Œ ìˆ¨ê¹€

---

## 10. Firestore Security Rules ì˜ˆì‹œ

```js
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ìœ ì € ì •ë³´
    match /Users/{userId} {
      allow read: if isSignedIn() && isApproved();
      allow write: if isMainAdmin();
    }
    // ê³µì§€ì‚¬í•­
    match /Notices/{noticeId} {
      allow read: if isSignedIn() && isApproved();
      allow create, update, delete: if isMainAdmin() || isHQAdmin() || (isBranchAdmin() && resource.data.targetScope == 'branch');
    }
    // ê²Œì‹œíŒ
    match /Boards/{boardId} {
      allow read: if isSignedIn() && isApproved();
      allow create: if isSignedIn() && isApproved();
      allow update, delete: if isMainAdmin() || isHQAdmin() || isBranchAdmin() || (isEmployee() && request.resource.data.createdBy == request.auth.uid);
    }
    // ìë£Œ ìš”ì²­
    match /DataRequests/{requestId} {
      allow read: if isSignedIn() && isApproved();
      allow create: if isMainAdmin() || isHQAdmin() || isBranchAdmin();
      allow update, delete: if isMainAdmin() || isHQAdmin();
    }
    // ìë£Œ ì œì¶œ
    match /DataSubmissions/{submissionId} {
      allow read: if isSignedIn() && isApproved();
      allow create: if isEmployee() && request.resource.data.submittedBy == request.auth.uid;
    }
    // ë¶€ì„œ ì •ë³´
    match /Departments/{deptId} {
      allow read: if isSignedIn() && isApproved();
      allow write: if isMainAdmin();
    }

    // Helper functions
    function isSignedIn() {
      return request.auth != null;
    }
    function isApproved() {
      return get(/databases/$(database)/documents/Users/$(request.auth.uid)).data.approved == true;
    }
    function isMainAdmin() {
      return get(/databases/$(database)/documents/Users/$(request.auth.uid)).data.role == 'main_admin';
    }
    function isHQAdmin() {
      return get(/databases/$(database)/documents/Users/$(request.auth.uid)).data.role == 'hq_admin';
    }
    function isBranchAdmin() {
      return get(/databases/$(database)/documents/Users/$(request.auth.uid)).data.role == 'branch_admin';
    }
    function isEmployee() {
      return get(/databases/$(database)/documents/Users/$(request.auth.uid)).data.role == 'employee';
    }
  }
}
```

- ìŠ¹ì¸ ì „ ì‚¬ìš©ìëŠ” ëª¨ë“  ë°ì´í„° ì ‘ê·¼ ì°¨ë‹¨
- ìµëª… ê²Œì‹œíŒë„ Firestoreì—ëŠ” createdBy ì €ì¥(ê´€ë¦¬ìë§Œ ì‹ë³„)
- ê° ì»¬ë ‰ì…˜ë³„ë¡œ ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´